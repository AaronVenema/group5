<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<title>Dashboard</title>
</head>

<body>
    <h2>Adding event for {{dateStr}}</h2>
    <form id="event">
        <div id="income">
            <input type="text" id="inc-name" placeholder="Name of income..." />
            <input type="number" id="inc-amount" min="0" placeholder="Income amount..." />
            or <button id="show-expense">Add Expense</button>
            <button type="submit">Save</button>
        </div>

        <div id="expense" style="display:none;">
            <input type="text" id="exp-name" placeholder="Name of expense..." />
            <input type="number" id="exp-amount" min="0" placeholder="Expense amount..." />
            <select id="category" required>
                {{#each categories as |category|}}
                <option value="{{category.name}}">{{category.name}}</option>
                {{/each}}
            </select>
            or <button id="show-income">Add Income</button>
            <button type="submit">Save</button>
        </div>
    </form>

    <script>
        let state
        $('#show-expense').on('click', e => {
            e.preventDefault()
            $('#expense').attr('style', 'display:block;')
            $('#income').attr('style', 'display:none;')
            state = 'expense'
        })
        $('#show-income').on('click', e => {
            e.preventDefault()
            $('#income').attr('style', 'display:block;')
            $('#expense').attr('style', 'display:none;')
            state = 'income'
        })
        $('#event').on('submit', e => {
            e.preventDefault()
            if (state === 'expense') {
                const name = $('#exp-name').val().trim()
                const amount = $('#exp-amount').val().trim()
                const category = $('#category').val().trim()
                console.log(name, amount, category)
            } else {
                const name = $('#inc-name').val().trim()
                const amount = $('#inc-amount').val().trim()
                console.log(name, amount)
            }
        })
    </script>